{% extends 'base.html' %}

{% load static %}

{% block content %}
<div class="card">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs" role="tablist">
            <li class="nav-item"><a class="nav-link active" id="item-1-1-tab" data-toggle="tab" role="tab"
                    aria-controls="item-1-1" aria-selected="true" href="#item-1-1">View Student</a></li>
            <li class="nav-item"><a class="nav-link" id="item-1-2-tab" data-toggle="tab" role="tab"
                    aria-controls="item-1-2" aria-selected="false" href="#item-1-2">Add Student</a></li>
            <li class="nav-item"><a class="nav-link" id="item-1-2-tab" data-toggle="tab" role="tab"
                    aria-controls="item-1-2" aria-selected="false" href="#item-1-3">Update Student</a></li>
            <li class="nav-item"><a class="nav-link" id="item-1-2-tab" data-toggle="tab" role="tab"
                    aria-controls="item-1-2" aria-selected="false" href="#item-1-4">Delete Student</a></li>
        </ul>
    </div>
    <div class="card-body">
        <div id="nav-tabContent" class="tab-content">

            <!-- View student section-->
            <div id="item-1-1" class="tab-pane fade show active" role="tabpanel" aria-labelledby="item-1-1-tab">
                <div class="container">
                    <form action="/view_students" method="POST" class="form-inline mb-2" >
                        {% csrf_token %}
                        <div class="form-group">
                            <label class="mb-2">Select Year</label>
                            <select class="form-control ml-2 mb-2" name="year">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                            </select>
                            <button  type="submit" class="btn btn-primary ml-2 mb-2" >View</button>
                        </div>   
                    </form>
                    <table  class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Roll No.</th>
                                <th>Name</th>
                                <th>Year</th>
                                <th>Father's Name</th>
                                <th>Mobile No.</th>
                                <th>Email</th>
                                <th>Address</th>    
                            </tr>
                        </thead>
                        <tbody>

                            {% for item in data %}
                            <tr>
                                <td>{{ item.roll_number }}</td>
                                <td>{{ item.student_name }}</td>
                                <td>{{ item.year }}</td>
                                <td>{{ item.father_name }}</td>
                                <td>{{ item.mobile_number }}</td>
                                <td>{{ item.mail }}</td>
                                <td>{{ item.address }}</td>
                            </tr>  
                            {% endfor %} 
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Add student section-->
            <div id="item-1-2" class="tab-pane fade" role="tabpanel" aria-labelledby="item-1-2-tab">
                <form action="/add_student_detail" method="POST">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label>Roll Number</label>
                            <input type="text" class="form-control" name="roll_number" placeholder="XXX174XXXXXX53" pattern="[0-9]{13}" required>
                        </div>
                        <div class="form-group col-md-6">
                            <label>Student Name</label>
                            <input type="text" class="form-control" name="student_name" placeholder="Name" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Father's Name</label>
                        <input type="text" class="form-control" name="father_name" placeholder="Father's Name">
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label>Year</label>
                            <select class="form-control" name="year">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label>Mobile Number</label>
                            <input type="tel" class="form-control" name="mobile_number" placeholder="+918449XXXX14" pattern="[0-9]{10}" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label>Email</label>
                            <input type="email" class="form-control" name="email" placeholder="xyz@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input type="text" class="form-control" name="address" placeholder="Address" required>
                    </div>
                    <button id="open-popup-btn" type="submit" class="btn btn-primary">Add Student</button>
                </form>
            </div>
            
            <!--Update student section-->
            <div id="item-1-3" class="tab-pane fade" role="tabpanel" aria-labelledby="item-1-3-tab">
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <div class="form-group">
                                <label>Roll Number</label>
                                <input type="text" class="form-control" name="roll_number" placeholder="XXX1747XXXX53" pattern="[0-9]{13}" required>
                            </div>
                            <div class="form-group">
                                <label>Old Value</label>
                                <select class="form-control" name="old_value">
                                    <option>Name</option>
                                    <option>Year</option>
                                    <option>Father's Name</option>
                                    <option>Mobile No.</option>
                                    <option>Email</option>
                                    <option>Address</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>New Value</label>
                                <input type="text" class="form-control" name="new_value" placeholder="New Value" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Update</button>
                        </div>
                    </div>
                </form>
            </div>

            <!--Delete student section-->
            <div id="item-1-4" class="tab-pane fade" role="tabpanel" aria-labelledby="item-1-4-tab">
                <form action="/delete_student" method="POST">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <div class="form-group">
                                <label>Roll Number</label>
                                <input type="text" class="form-control" name="roll_number" placeholder="XXX1747XXXX53" pattern="[0-9]{13}" required>
                            </div>
                            <div class="form-group">
                                <label>Select Year</label>
                                <select class="form-control" name="year">
                                    <option selected>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Delete</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}